<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Portfolio • Didier Basque</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      font-family: 'Segoe UI', sans-serif;
      background-color: #f3f3f3;
    }
    svg {
      width: 100vw;
      height: 100vh;
      display: block;
    }
    .tooltip {
      position: absolute;
      max-width: 300px;
      background: rgba(20,20,20,0.92);
      color: white;
      padding: 1rem;
      border-radius: 12px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
      font-size: 14px;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .tooltip h3 {
      margin: 0 0 0.5rem;
      font-size: 16px;
    }
    .signature {
      position: absolute;
      bottom: 20px;
      left: 30px;
      color: #222;
      font-size: 13px;
      max-width: 300px;
    }
    .signature strong {
      font-size: 16px;
      color: #ff5500;
    }
    .intention {
      position: absolute;
      bottom: 20px;
      right: 30px;
      color: #222;
      font-size: 13px;
      max-width: 320px;
    }
    .intention strong {
      font-size: 16px;
      color: #ff5500;
      display: block;
      margin-bottom: 6px;
    }
    .filter-bar {
      position: absolute;
      top: 20px;
      left: 30px;
      display: flex;
      gap: 10px;
    }
    .filter-bar button {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: #111;
      color: white;
      border: none;
      font-weight: bold;
      font-size: 12px;
      cursor: pointer;
      transition: background 0.3s ease;
      text-align: center;
    }
    .filter-bar button:hover,
    .filter-bar button.active {
      background: #ff5500;
      color: #fff;
    }
  </style>
</head>
<body>
<div class="tooltip"></div>
<div class="filter-bar"></div>
<svg></svg>
<div class="signature">
  <strong>PORTFOLIO • Didier Basque</strong>
  Une exploration graphique de mes pratiques professionnelles et artistiques.
  Chaque cercle est une trace, un mouvement, une mémoire mise en forme pour dire le sens de mes engagements.
</div>
<div class="intention">
  <strong>Note d’intention</strong>
  Ce portfolio est né d’un besoin de représenter visuellement et intuitivement la richesse d’un parcours pluridisciplinaire. 
  Plutôt que de lister de façon figée mes expériences, j’ai choisi une forme organique, mouvante, vivante — un espace en perpétuelle recomposition.
  Chaque cercle représente une partie de moi : un poste, un diplôme, un centre d’intérêt ou une recherche approfondie. 
  Ces éléments ne sont pas hiérarchisés mais mis en mouvement : leurs croisements donnent du sens à mon cheminement.
</div>
<script src="https://d3js.org/d3.v7.min.js"></script>
<script>
const svg = d3.select("svg");
const tooltip = d3.select(".tooltip");
const width = window.innerWidth;
const height = window.innerHeight;
const filters = ['Tous', 'Poste', 'Diplôme', 'Interets', 'Mémoire'];

const keyNodes = [
  { id: "Formateur Manager", group: "Poste", color: "#FF6B6B", text: "J'ai appris à encadrer avec écoute et efficacité." },
  { id: "Master Humanités Num.", group: "Diplôme", color: "#4ECDC4", text: "Ce master m'aide à penser la technologie comme vecteur culturel." },
  { id: "Mémoire Sentier Augmenté", group: "Mémoire", color: "#00A896", strokeOnly: true, text: "Mon mémoire propose de numériser les traces culturelles du Bassin Vital..." },
  { id: "Licence Pro Commerce", group: "Diplôme", color: "#A163F2", text: "Cette formation m'a permis de relier créativité et logique de marché." },
  { id: "Stage Maraîchage", group: "Poste", color: "#FFD166", text: "Travailler la terre m'a appris rigueur et respect du rythme naturel." },
  { id: "Nature & objets", group: "Interets", color: "#EF476F", text: "Je m'inspire de la nature pour transformer et revaloriser les objets." },
  { id: "Feng Shui", group: "Interets", color: "#7B2CBF", text: "Le Feng Shui m'enseigne l'équilibre entre espace, circulation et énergie visuelle." },
  { id: "Écriture / Poésie", group: "Interets", color: "#FF3366", text: "J'écris en français et créole pour faire vibrer les mots et les souvenirs." },
  { id: "Gérant PNP", group: "Poste", color: "#06D6A0", text: "Piloter une entreprise m'a donné une vision stratégique et autonome du numérique." }
];

const allNodes = d3.range(250).map((_, i) => {
  const k = keyNodes[i];
  return {
    id: k?.id || null,
    group: k?.group || null,
    text: k?.text || null,
    isKey: !!k,
    color: k?.color || '#ccc',
    radius: k ? 15 + Math.random() * 15 : 3 + Math.random() * 6,
    strokeOnly: !!k?.strokeOnly,
    visible: true
  };
});

let simulation = d3.forceSimulation(allNodes)
  .force("charge", d3.forceManyBody().strength(-35))
  .force("center", d3.forceCenter(width / 2, height / 2))
  .force("collision", d3.forceCollide().radius(d => d.radius + 2))
  .on("tick", ticked);

const node = svg.selectAll("circle")
  .data(allNodes)
  .enter().append("circle")
  .attr("r", d => d.radius)
  .attr("fill", d => d.strokeOnly ? "none" : d.color)
  .attr("stroke", d => d.strokeOnly ? d.color : "none")
  .attr("stroke-width", d => d.strokeOnly ? 2 : 0)
  .attr("opacity", d => d.isKey ? 1 : 0.3)
  .on("mouseover", function(event, d) {
    if (d.isKey && d.text) {
      tooltip
        .style("opacity", 1)
        .html(`<h3 style='color:${d.color}'>${d.id}</h3><p>${d.text}</p>`);
    }
  })
  .on("mousemove", function(event) {
    tooltip.style("left", (event.pageX + 10) + "px").style("top", (event.pageY - 20) + "px");
  })
  .on("mouseout", () => tooltip.style("opacity", 0));

function ticked() {
  node.attr("cx", d => d.x).attr("cy", d => d.y).attr("display", d => d.visible ? null : "none");
}

// Filter buttons
const bar = d3.select(".filter-bar");
filters.forEach(f => {
  bar.append("button")
    .text(f[0])
    .attr("title", f)
    .attr("class", f === "Tous" ? "active" : "")
    .on("click", function() {
      d3.selectAll(".filter-bar button").classed("active", false);
      d3.select(this).classed("active", true);
      allNodes.forEach(d => {
        d.visible = (f === "Tous") || (d.group === f);
      });
      simulation.alpha(1).restart();
    });
});
</script>
</body>
</html>
