<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Portfolio Atomique - Didier Basque</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      font-family: 'Segoe UI', sans-serif;
      background-color: #f6f2ee;
    }
    svg {
      width: 100vw;
      height: 100vh;
      display: block;
    }
    .tooltip {
      position: absolute;
      opacity: 0;
      background: #222;
      color: white;
      padding: 1rem;
      border-radius: 14px;
      width: 250px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.25);
      font-size: 14px;
      pointer-events: none;
      transition: opacity 0.3s ease;
      line-height: 1.5;
    }
    .tooltip h3 {
      margin: 0 0 0.5rem;
      font-size: 16px;
    }
    .tooltip ul {
      padding-left: 20px;
      margin: 0;
    }
    .tooltip ul li {
      margin-bottom: 4px;
    }
  </style>
</head>
<body>
<div class="tooltip"></div>
<svg></svg>

<script src="https://d3js.org/d3.v7.min.js"></script>
<script>
const width = window.innerWidth;
const height = window.innerHeight;

const keyNodes = [
  {
    id: "Formateur Manager",
    type: "poste",
    skills: ["Analyser", "Accompagnement", "Encadrement", "Évaluation", "Animation"]
  },
  {
    id: "Enseignant INFOCOM",
    type: "poste",
    skills: ["Pédagogie", "Médiation", "Groupe", "Prépa cours", "Communication"]
  },
  {
    id: "Gérant PNP",
    type: "poste",
    skills: ["Stratégie", "Informatique", "Finances", "Client", "Entrepreneuriat"]
  },
  {
    id: "Licence Pro Commerce",
    type: "diplome",
    skills: ["E-commerce", "Marketing", "Vente", "Marché", "Visuel"]
  },
  {
    id: "Master Humanités Num.",
    type: "diplome",
    skills: ["Design", "Culture numérique", "Industries", "Analyse", "Recherche"]
  },
  {
    id: "Stage Maraîchage",
    type: "poste",
    skills: ["Horticulture", "Durabilité", "Manuel", "Cahier des charges", "Végétaux"]
  },
  {
    id: "Feng Shui",
    type: "formation",
    skills: ["Espaces", "Énergie", "Plans", "Symboles", "Harmonie"]
  },
  {
    id: "Écriture / Poésie",
    type: "centre",
    skills: ["Création", "Langue", "Inspiration", "Multilingue", "Expression libre"]
  },
  {
    id: "Nature & objets",
    type: "centre",
    skills: ["Observation", "Sculpture", "Réflexion", "Esthétique", "Respect vivant"]
  }
];

const colors = [
  "#FF6B6B", "#4ECDC4", "#F7B801", "#A163F2", "#FF9F1C", "#00A896", "#3D5A80", "#EF476F", "#118AB2"
];

const tooltip = d3.select(".tooltip");
const svg = d3.select("svg");

const totalNodes = 160;

const allNodes = Array.from({ length: totalNodes }, (_, i) => {
  const d = keyNodes[i] || null;
  return {
    id: d?.id || null,
    skills: d?.skills || [],
    isKey: !!d,
    color: d ? colors[i % colors.length] : "#999",
    radius: d ? 16 + Math.random() * 10 : 4 + Math.random() * 10
  };
});

const simulation = d3.forceSimulation(allNodes)
  .force("charge", d3.forceManyBody().strength(-20))
  .force("center", d3.forceCenter(width / 2, height / 2))
  .force("collision", d3.forceCollide().radius(d => d.radius + 2))
  .on("tick", ticked);

const node = svg.selectAll("circle")
  .data(allNodes)
  .enter()
  .append("circle")
  .attr("r", d => d.radius)
  .attr("fill", d => d.color)
  .attr("opacity", d => d.isKey ? 1 : 0.5)
  .style("cursor", d => d.isKey ? "pointer" : "default")
  .on("mouseover", function(event, d) {
    if (d.isKey) {
      tooltip
        .style("opacity", 1)
        .html(`
          <h3 style="color:${d.color};">${d.id}</h3>
          <ul>${d.skills.map(skill => `<li>${skill}</li>`).join("")}</ul>
        `);
    }
  })
  .on("mousemove", function(event) {
    tooltip
      .style("left", (event.pageX + 15) + "px")
      .style("top", (event.pageY - 20) + "px");
  })
  .on("mouseout", function() {
    tooltip.style("opacity", 0);
  });

function ticked() {
  node
    .attr("cx", d => d.x)
    .attr("cy", d => d.y);
}
</script>
</body>
</html>
